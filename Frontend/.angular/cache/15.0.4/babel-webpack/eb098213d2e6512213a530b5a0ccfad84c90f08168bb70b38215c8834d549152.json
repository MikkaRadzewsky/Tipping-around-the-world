{"ast":null,"code":"import _asyncToGenerator from \"/Users/raniradzewsky/Library/Mobile Documents/com~apple~CloudDocs/Documents/school/John Bryce/My Projects/Tipping around the world - Angular/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { firstValueFrom } from 'rxjs';\nimport { appConfig } from '../utils/app-config';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class DataService {\n  constructor(http) {\n    this.http = http;\n  }\n  //Get all continents:\n  getContinents() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const observable = _this.http.get(appConfig.continentsUrl);\n      const continents = yield (yield firstValueFrom(observable)).sort((a, b) => {\n        var nameA = a.name.toLowerCase();\n        var nameB = b.name.toLowerCase();\n        if (nameA < nameB)\n          //sort string ascending\n          return -1;\n      });\n      return continents;\n    })();\n  }\n  //Get all countries:\n  getCountries() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const observable = _this2.http.get(appConfig.countriesUrl);\n      const countries = yield firstValueFrom(observable);\n      return countries;\n    })();\n  }\n  //Get countries by continent:\n  getCountriesByContinent(continentId) {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      if (continentId === \"0\") {\n        const observable = _this3.http.get(appConfig.countriesUrl);\n        const countries = yield firstValueFrom(observable);\n        return countries;\n      }\n      const observable = _this3.http.get(appConfig.countriesByContinentsUrl + continentId);\n      const countries = yield firstValueFrom(observable);\n      return countries;\n    })();\n  }\n  // Add country:\n  addCountry(country) {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      const observable = _this4.http.post(appConfig.countriesUrl, country);\n      yield firstValueFrom(observable);\n    })();\n  }\n  // Delete country:\n  deleteCountry(countryId) {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      const observable = _this5.http.delete(appConfig.countriesUrl + countryId);\n      yield firstValueFrom(observable);\n    })();\n  }\n}\nDataService.ɵfac = function DataService_Factory(t) {\n  return new (t || DataService)(i0.ɵɵinject(i1.HttpClient));\n};\nDataService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: DataService,\n  factory: DataService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":";AAEA,SAASA,cAAc,QAAQ,MAAM;AAIrC,SAASC,SAAS,QAAQ,qBAAqB;;;AAK/C,OAAM,MAAOC,WAAW;EACtBC,YAA2BC,IAAgB;IAAhB,SAAI,GAAJA,IAAI;EAAe;EAE9C;EACaC,aAAa;IAAA;IAAA;MACxB,MAAMC,UAAU,GAAG,KAAI,CAACF,IAAI,CAACG,GAAG,CAAmBN,SAAS,CAACO,aAAa,CAAC;MAC3E,MAAMC,UAAU,SAAS,OAAOT,cAAc,CAACM,UAAU,CAAC,EAAEI,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAC;QACnE,IAAIC,KAAK,GAAGF,CAAC,CAACG,IAAI,CAACC,WAAW,EAAE;QAChC,IAAIC,KAAK,GAAGJ,CAAC,CAACE,IAAI,CAACC,WAAW,EAAE;QAChC,IAAIF,KAAK,GAAGG,KAAK;UAAE;UACf,OAAO,CAAC,CAAC;MACjB,CAAC,CAAC;MACF,OAAOP,UAAU;IAAC;EACpB;EAEA;EACaQ,YAAY;IAAA;IAAA;MACvB,MAAMX,UAAU,GAAG,MAAI,CAACF,IAAI,CAACG,GAAG,CAAiBN,SAAS,CAACiB,YAAY,CAAC;MACxE,MAAMC,SAAS,SAASnB,cAAc,CAACM,UAAU,CAAC;MAClD,OAAOa,SAAS;IAAC;EACnB;EAEA;EACaC,uBAAuB,CAClCC,WAAmB;IAAA;IAAA;MAEnB,IAAIA,WAAW,KAAK,GAAG,EAAE;QACvB,MAAMf,UAAU,GAAG,MAAI,CAACF,IAAI,CAACG,GAAG,CAAiBN,SAAS,CAACiB,YAAY,CAAC;QACxE,MAAMC,SAAS,SAASnB,cAAc,CAACM,UAAU,CAAC;QAClD,OAAOa,SAAS;;MAElB,MAAMb,UAAU,GAAG,MAAI,CAACF,IAAI,CAACG,GAAG,CAC9BN,SAAS,CAACqB,wBAAwB,GAAGD,WAAW,CACjD;MACD,MAAMF,SAAS,SAASnB,cAAc,CAACM,UAAU,CAAC;MAClD,OAAOa,SAAS;IAAC;EACnB;EAEA;EACaI,UAAU,CAACC,OAAqB;IAAA;IAAA;MAC3C,MAAMlB,UAAU,GAAG,MAAI,CAACF,IAAI,CAACqB,IAAI,CAC/BxB,SAAS,CAACiB,YAAY,EACtBM,OAAO,CACR;MACD,MAAMxB,cAAc,CAACM,UAAU,CAAC;IAAC;EACnC;EAEA;EACaoB,aAAa,CAACC,SAAiB;IAAA;IAAA;MAC1C,MAAMrB,UAAU,GAAG,MAAI,CAACF,IAAI,CAACwB,MAAM,CAAC3B,SAAS,CAACiB,YAAY,GAAGS,SAAS,CAAC;MACvE,MAAM3B,cAAc,CAACM,UAAU,CAAC;IAAC;EACnC;;AAnDWJ,WAAW;mBAAXA,WAAW;AAAA;AAAXA,WAAW;SAAXA,WAAW;EAAA2B,SAAX3B,WAAW;EAAA4B,YAFV;AAAM","names":["firstValueFrom","appConfig","DataService","constructor","http","getContinents","observable","get","continentsUrl","continents","sort","a","b","nameA","name","toLowerCase","nameB","getCountries","countriesUrl","countries","getCountriesByContinent","continentId","countriesByContinentsUrl","addCountry","country","post","deleteCountry","countryId","delete","factory","providedIn"],"sourceRoot":"","sources":["/Users/raniradzewsky/Library/Mobile Documents/com~apple~CloudDocs/Documents/school/John Bryce/My Projects/Tipping around the world - Angular/Frontend/src/app/services/data.service.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { firstValueFrom } from 'rxjs';\n\nimport { ContinentModel } from '../models/continent-model';\nimport { CountryModel } from '../models/country-model';\nimport { appConfig } from '../utils/app-config';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class DataService {\n  public constructor(private http: HttpClient) {}\n\n  //Get all continents:\n  public async getContinents(): Promise<ContinentModel[]> {\n    const observable = this.http.get<ContinentModel[]>(appConfig.continentsUrl);\n    const continents = await (await firstValueFrom(observable)).sort((a, b) {\n        var nameA = a.name.toLowerCase();\n        var nameB = b.name.toLowerCase();\n        if (nameA < nameB) //sort string ascending\n            return -1\n    });\n    return continents;\n  }\n\n  //Get all countries:\n  public async getCountries(): Promise<CountryModel[]> {\n    const observable = this.http.get<CountryModel[]>(appConfig.countriesUrl);\n    const countries = await firstValueFrom(observable);\n    return countries;\n  }\n\n  //Get countries by continent:\n  public async getCountriesByContinent(\n    continentId: string\n  ): Promise<CountryModel[]> {\n    if (continentId === \"0\") {\n      const observable = this.http.get<CountryModel[]>(appConfig.countriesUrl);\n      const countries = await firstValueFrom(observable);\n      return countries;\n    }\n    const observable = this.http.get<CountryModel[]>(\n      appConfig.countriesByContinentsUrl + continentId\n    );\n    const countries = await firstValueFrom(observable);\n    return countries;\n  }\n\n  // Add country:\n  public async addCountry(country: CountryModel): Promise<void> {\n    const observable = this.http.post<CountryModel>(\n      appConfig.countriesUrl,\n      country\n    );\n    await firstValueFrom(observable);\n  }\n\n  // Delete country:\n  public async deleteCountry(countryId: string): Promise<void> {\n    const observable = this.http.delete(appConfig.countriesUrl + countryId);\n    await firstValueFrom(observable);\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}