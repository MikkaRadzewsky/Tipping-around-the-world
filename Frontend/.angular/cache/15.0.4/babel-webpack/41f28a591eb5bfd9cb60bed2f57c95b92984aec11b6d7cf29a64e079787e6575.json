{"ast":null,"code":"import _asyncToGenerator from \"/Users/raniradzewsky/Library/Mobile Documents/com~apple~CloudDocs/Documents/school/John Bryce/Tests/Test 4/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/data.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction ListComponent_option_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 4);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const et_r2 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", et_r2._id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(et_r2.name);\n  }\n}\nfunction ListComponent_table_5_tr_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"td\")(13, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function ListComponent_table_5_tr_16_Template_button_click_13_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const e_r4 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r5.deleteMe(e_r4._id));\n    });\n    i0.ɵɵtext(14, \"X\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const e_r4 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(3, 5, e_r4.eventDateTime, \"dd/MM/yyyy HH:mm\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(e_r4.eventDescription);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(e_r4.eventLocation);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", e_r4.eventCapacity, \" People\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(e_r4.eventDateTime < ctx_r3.today ? \"Yes\" : \"No\");\n  }\n}\nfunction ListComponent_table_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"table\")(1, \"thead\")(2, \"tr\")(3, \"th\");\n    i0.ɵɵtext(4, \"Event Date & Time\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"th\");\n    i0.ɵɵtext(6, \"Event Description\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"th\");\n    i0.ɵɵtext(8, \"Event Location\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"th\");\n    i0.ɵɵtext(10, \"Event Capacity\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"th\");\n    i0.ɵɵtext(12, \"Has the Event Happened?\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"th\");\n    i0.ɵɵtext(14, \"Delete\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(15, \"tbody\");\n    i0.ɵɵtemplate(16, ListComponent_table_5_tr_16_Template, 15, 8, \"tr\", 5);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(16);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.events);\n  }\n}\nexport class ListComponent {\n  constructor(dataService) {\n    this.dataService = dataService;\n    this.eventTypes = [];\n    this.events = [];\n    this.today = new Date().toISOString();\n  }\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        _this.eventTypes = yield _this.dataService.getAllEventTypes();\n      } catch (err) {\n        alert(err.message);\n      }\n    })();\n  }\n  displayEvents(args) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        const selectElement = args.target;\n        const eventTypeId = selectElement.value;\n        _this2.events = yield _this2.dataService.getEventsByType(eventTypeId);\n      } catch (err) {\n        alert(err.message);\n      }\n    })();\n  }\n  deleteMe(_id) {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        if (!window.confirm(\"Are you sure?\")) return;\n        yield _this3.dataService.deleteEvent(_id);\n        alert(\"Event has been deleted\");\n        //Refresh list:\n        const index = _this3.events.findIndex(e => e._id === _id);\n        _this3.events.splice(index, 1);\n      } catch (err) {\n        alert(err.message);\n      }\n    })();\n  }\n}\nListComponent.ɵfac = function ListComponent_Factory(t) {\n  return new (t || ListComponent)(i0.ɵɵdirectiveInject(i1.DataService));\n};\nListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ListComponent,\n  selectors: [[\"app-list\"]],\n  decls: 6,\n  vars: 2,\n  consts: [[3, \"change\"], [\"selected\", \"\", \"disabled\", \"\", \"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [3, \"value\"], [4, \"ngFor\", \"ngForOf\"], [3, \"click\"]],\n  template: function ListComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\")(1, \"select\", 0);\n      i0.ɵɵlistener(\"change\", function ListComponent_Template_select_change_1_listener($event) {\n        return ctx.displayEvents($event);\n      });\n      i0.ɵɵelementStart(2, \"option\", 1);\n      i0.ɵɵtext(3, \"Select Event Type\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(4, ListComponent_option_4_Template, 2, 2, \"option\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(5, ListComponent_table_5_Template, 17, 1, \"table\", 3);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngForOf\", ctx.eventTypes);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.events == null ? null : ctx.events.length);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i2.DatePipe],\n  styles: [\"table[_ngcontent-%COMP%] {\\n    color: aliceblue;\\n    margin: 20px auto;\\n    background-color: black;\\n    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.208);\\n    transition: 0.3s;\\n    width: 80%;\\n    text-align: center;\\n    padding: 15px 20px;\\n    overflow: auto;\\n    border-radius: 20px;\\n}\\n\\ntable[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%], ng-template[_ngcontent-%COMP%] {\\n    border-radius: 20px;\\n    border-collapse: collapse;\\n    padding: 5px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29tcG9uZW50cy9kYXRhLWFyZWEvbGlzdC9saXN0LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxnQkFBZ0I7SUFDaEIsaUJBQWlCO0lBQ2pCLHVCQUF1QjtJQUN2Qiw0Q0FBNEM7SUFDNUMsZ0JBQWdCO0lBQ2hCLFVBQVU7SUFDVixrQkFBa0I7SUFDbEIsa0JBQWtCO0lBQ2xCLGNBQWM7SUFDZCxtQkFBbUI7QUFDdkI7O0FBRUE7SUFDSSxtQkFBbUI7SUFDbkIseUJBQXlCO0lBQ3pCLFlBQVk7QUFDaEIiLCJzb3VyY2VzQ29udGVudCI6WyJ0YWJsZSB7XG4gICAgY29sb3I6IGFsaWNlYmx1ZTtcbiAgICBtYXJnaW46IDIwcHggYXV0bztcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjaztcbiAgICBib3gtc2hhZG93OiAwIDRweCA4cHggMCByZ2JhKDAsIDAsIDAsIDAuMjA4KTtcbiAgICB0cmFuc2l0aW9uOiAwLjNzO1xuICAgIHdpZHRoOiA4MCU7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIHBhZGRpbmc6IDE1cHggMjBweDtcbiAgICBvdmVyZmxvdzogYXV0bztcbiAgICBib3JkZXItcmFkaXVzOiAyMHB4O1xufVxuXG50YWJsZSx0aCx0ZCxuZy10ZW1wbGF0ZSB7XG4gICAgYm9yZGVyLXJhZGl1czogMjBweDtcbiAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xuICAgIHBhZGRpbmc6IDVweDtcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","ListComponent","constructor","dataService","Date","toISOString","ngOnInit","eventTypes","getAllEventTypes","err","alert","message","displayEvents","args","selectElement","target","eventTypeId","value","events","getEventsByType","deleteMe","_id","window","confirm","deleteEvent","index","findIndex","e","splice","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["/Users/raniradzewsky/Library/Mobile Documents/com~apple~CloudDocs/Documents/school/John Bryce/Tests/Test 4/Frontend/src/app/components/data-area/list/list.component.html","/Users/raniradzewsky/Library/Mobile Documents/com~apple~CloudDocs/Documents/school/John Bryce/Tests/Test 4/Frontend/src/app/components/data-area/list/list.component.ts"],"sourcesContent":["<div>\n    <select (change)=\"displayEvents($event)\">\n      <option selected disabled value=\"\">Select Event Type</option>\n      <option *ngFor=\"let et of eventTypes\" value=\"{{ et._id }}\">{{ et.name }}</option>\n    </select>\n  \n    <table *ngIf=\"events?.length\">\n      <thead>\n          <tr>\n              <th>Event Date & Time</th>\n              <th>Event Description</th>\n              <th>Event Location</th>\n              <th>Event Capacity</th>\n              <th>Has the Event Happened?</th>\n              <th>Delete</th>\n          </tr>\n      </thead>\n      <tbody>\n          <tr *ngFor=\"let e of events\">\n              <td>{{e.eventDateTime | date:\"dd/MM/yyyy HH:mm\"}}</td>\n              <td>{{e.eventDescription}}</td>\n              <td>{{e.eventLocation}}</td> \n              <td>{{e.eventCapacity}} People</td>\n              <td>{{e.eventDateTime < today? \"Yes\" : \"No\"}}</td>\n              <td>\n                  <button (click)=\"deleteMe(e._id)\">X</button>\n              </td>\n          </tr>\n      </tbody>\n    </table>\n  </div>\n","import { Component } from '@angular/core';\nimport { EventModel } from 'src/app/models/event-model';\nimport { EventTypeModel } from 'src/app/models/event-type-model';\nimport { DataService } from 'src/app/services/data.service';\n\n\n@Component({\n  selector: 'app-list',\n  templateUrl: './list.component.html',\n  styleUrls: ['./list.component.css']\n})\nexport class ListComponent {\n    \n    public eventTypes: EventTypeModel[] = [];\n    public events: EventModel[] = [];\n    public today = new Date().toISOString();\n\n    public constructor(private dataService: DataService) {}\n\n\n    public async ngOnInit() {\n        try {\n            this.eventTypes = await this.dataService.getAllEventTypes();\n        }\n        catch (err: any) {\n            alert(err.message);\n        }\n    }\n\n    public async displayEvents(args: Event){\n        try{\n            const selectElement = args.target as HTMLSelectElement;\n            const eventTypeId = selectElement.value;\n            this.events = await this.dataService.getEventsByType(eventTypeId)\n        }\n        catch (err: any) {\n            alert(err.message)\n        }\n    }\n\n    public async deleteMe(_id: string) {\n        try {\n            if(!window.confirm(\"Are you sure?\")) return;\n            \n            await this.dataService.deleteEvent(_id);\n            alert(\"Event has been deleted\");\n\n            //Refresh list:\n            const index = this.events.findIndex(e => e._id === _id);\n            this.events.splice(index, 1);\n        }\n        catch (err:any) {\n            alert(err.message)\n        }\n    }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}